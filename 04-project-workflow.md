# ส่วนที่ 4: การทำงานโครงงานจริง (Comorg-Book-Thai)

[← กลับไปสารบัญหลัก](README.md) | [ก่อนหน้า: บททดสอบก่อนลงสนาม](03-workshop.md) | [ถัดไป: การทำงานหลายเครื่อง →](05-syncing.md)

---

เมื่อเข้าใจระบบจากการทำเวิร์กชอปแล้ว นิสิตจะนำมาใช้กับโครงงานจริงได้ดังนี้

---

## 4.1 การเตรียมโครงสร้างโดยหัวหน้ากลุ่ม (Project Skeleton)

หัวหน้ากลุ่มต้องสร้าง Repository ชื่อ `comorg-book-thai` และสร้างโครงสร้างโฟลเดอร์ไว้ก่อน เพื่อให้ลูกทีมมีจุดอ้างอิงตรงกัน และแก้ปัญหาที่ Git ไม่สามารถอัปโหลดโฟลเดอร์ว่างได้

**หมายเหตุ:** หากมีหลายกลุ่มแยกกันทำตามบท (กลุ่ม 1 ทำบทที่ 1 กลุ่ม 2 ทำบทที่ 2 ฯลฯ) ทุกกลุ่มใช้ Repository เดียวกัน โดยแต่ละกลุ่มทำงานในโฟลเดอร์ `chapter-X` ของตนเอง จึงไม่มีปัญหาเรื่องชื่อ Repository

**การสร้าง Repository:** โดยทั่วไปอาจารย์หรือหัวหน้ากลุ่มชั้นจะสร้าง Repository `comorg-book-thai` บน GitHub ให้ชั้นเรียน แล้วเพิ่มหัวหน้ากลุ่มแต่ละกลุ่มเป็น Collaborator จากนั้นหัวหน้ากลุ่มแต่ละกลุ่มจะสร้างโฟลเดอร์บทของตนเอง (ดูขั้นตอนด้านล่าง)

### ขั้นตอนที่หัวหน้ากลุ่มต้องทำ (ตามลำดับ)

#### ขั้นที่ 1: ได้รับ Repository และสิทธิ์

- ถ้าอาจารย์สร้าง Repository ให้: กดยอมรับคำเชิญ Collaborator ในอีเมล
- ถ้าหัวหน้ากลุ่มสร้างเอง: เข้า [GitHub](https://github.com) → กด **New** → ตั้งชื่อ `comorg-book-thai` → กด **Create repository** (ไม่ต้องติ๊กสร้าง README)

#### ขั้นที่ 2: โคลนโปรเจกต์ลงเครื่อง

```bash
git clone https://github.com/ชื่อผู้สร้าง/comorg-book-thai.git
cd comorg-book-thai
```

*(เปลี่ยน `ชื่อผู้สร้าง` เป็น username ของผู้สร้าง Repository)*

**ผลลัพธ์ที่พึงได้:** จะได้โฟลเดอร์ `comorg-book-thai` ในเครื่อง พร้อมไฟล์และโฟลเดอร์ย่อย (README.md, chapter-1/, chapter-2/ ฯลฯ) ตามที่หัวหน้ากลุ่มอื่นส่งขึ้นไปแล้ว

#### ขั้นที่ 3: สร้างโฟลเดอร์ ไฟล์ และ .gitignore

**3.1 สร้างไฟล์ `.gitignore`** (สำคัญ — ห้ามข้ามขั้นตอนนี้)

สร้างไฟล์ชื่อ `.gitignore` ในโฟลเดอร์หลักของโปรเจกต์ แล้วใส่เนื้อหาดังนี้:

```
*.pdf
```

**วัตถุประสงค์:** ป้องกันไม่ให้ไฟล์ PDF ถูกอัปโหลดขึ้น GitHub เด็ดขาด (ต้นฉบับ PDF มีลิขสิทธิ์ และใช้สำหรับสกัดข้อความในเครื่องเท่านั้น)

**3.2 สร้างโฟลเดอร์และไฟล์** ตามบทที่กลุ่มรับผิดชอบ:

**ไฟล์ README.md** (ที่โฟลเดอร์หลัก — ถ้ายังไม่มี):

```markdown
# โครงงานหนังสือ: สถาปัตยกรรมคอมพิวเตอร์

**จัดทำโดย ชั้นเรียน XXX**

## สารบัญหลัก

* [บทที่ 4: หน่วยความจำ (Memory)](chapter-4/README.md)
```

**ไฟล์ chapter-4/README.md** (สร้างโฟลเดอร์ `chapter-4` ก่อน แล้วสร้างไฟล์ README.md ข้างใน):

```markdown
# บทที่ 4: การจัดการหน่วยความจำ

| หัวข้อ | ผู้รับผิดชอบ | ลิงก์ไฟล์ |
| :--- | :--- | :--- |
| 4.1 | นางสาว ก. | [คลิกอ่าน 4.1](4-1.md) |
| 4.2 | นาย ข. | [คลิกอ่าน 4.2](4-2.md) |
```

*(หากมีหลายบท ให้สร้างโฟลเดอร์ chapter-1, chapter-2 ฯลฯ และ README.md ในแต่ละโฟลเดอร์)*

**หมายเหตุรูปภาพ:** หากใช้รูปภาพ ให้สร้างโฟลเดอร์ `images` ภายในโฟลเดอร์บท (เช่น `chapter-4/images/`) และใช้เฉพาะรูปที่ทำเองหรือมีลิขสิทธิ์ถูกต้อง ห้ามตัด-แปะจากต้นฉบับ PDF

#### ขั้นที่ 4: ส่งโครงสร้างขึ้น GitHub

```bash
git add .
git commit -m "หัวหน้าสร้างโครงสร้างบทที่ 4"
git push origin main
```

**ผลลัพธ์ที่พึงได้:** บน GitHub หน้า Repository จะแสดงโฟลเดอร์ `chapter-4` มีไฟล์ `README.md` และลิงก์ใน `README.md` หลักสามารถคลิกไปยัง `chapter-4` ได้

#### ขั้นที่ 5: เพิ่มสมาชิกในกลุ่มเป็น Collaborator

- เข้า Repository บน GitHub → **Settings** → **Collaborators** → **Add people**
- ใส่อีเมล GitHub ของสมาชิกในกลุ่มแล้วกดส่งคำเชิญ

### โครงสร้างที่ควรได้

```
comorg-book-thai/
├── .gitignore       ← หัวหน้าต้องสร้างไว้ตั้งแต่ต้น
├── README.md
├── chapter-1/        ← กลุ่ม 1
│   └── README.md
├── chapter-2/        ← กลุ่ม 2
│   └── README.md
└── chapter-4/        ← กลุ่ม 4
    └── README.md
```

---

## 4.2 กฎการอัปโหลดไฟล์และลิขสิทธิ์

### ไฟล์ที่อนุญาตให้ Push

| ประเภท | เงื่อนไข |
| :--- | :--- |
| **ไฟล์ .md** | อนุญาต — เป็นไฟล์หลักของโครงงาน |
| **ไฟล์รูปภาพ** | อนุญาตเฉพาะกรณี: (1) มีลิขสิทธิ์ถูกต้อง (เช่น ภาพที่สร้างเอง ภาพสาธารณสมบัติ ภาพที่ได้รับอนุญาต) (2) สร้างขึ้นเอง (3) **ห้ามตัด-แปะจากต้นฉบับ PDF** |
| **ไฟล์ PDF** | **ห้ามเด็ดขาด** — ใช้ต้นฉบับในเครื่องเท่านั้น ไม่ส่งขึ้น GitHub |

### การป้องกันไฟล์ PDF (ไฟล์ .gitignore)

หัวหน้ากลุ่มต้องสร้างไฟล์ `.gitignore` ใส่ `*.pdf` ตั้งแต่เริ่มโครงงาน (ดู [ขั้นที่ 3](#ขั้นที่-3-สร้างโฟลเดอร์-ไฟล์-และ-gitignore)) เพื่อให้ Git ไม่ track ไฟล์ PDF แม้จะอยู่ในโฟลเดอร์โปรเจกต์

---

## 4.3 กฎเหล็กการตั้งชื่อไฟล์และโฟลเดอร์

เพื่อป้องกันปัญหาลิงก์พังบน GitHub นิสิตต้องยึดกติกาดังนี้อย่างเคร่งครัด:

| กติกา | ห้ามทำ ❌ | ถูกต้อง ✅ |
| :--- | :--- | :--- |
| ใช้ภาษาอังกฤษเท่านั้น | `บทที่4.md` | `chapter-4.md` |
| ห้ามเว้นวรรค ใช้ขีดกลางแทน | `chapter 4.md` | `chapter-4.md` |
| ใช้ตัวพิมพ์เล็กทั้งหมด | `4-1.MD` | `4-1.md` |

**ข้อยกเว้น:** ไฟล์ `README.md` ต้องใช้ตัวพิมพ์ใหญ่ตามธรรมเนียมปฏิบัติ

**หมายเหตุ:** ไฟล์เนื้อหาทั้งหมดต้องลงท้ายด้วย `.md` (Markdown) เท่านั้น

---

## 4.4 ขั้นตอนการปฏิบัติงานของลูกทีม

### ครั้งแรก: ดึงโปรเจกต์ลงเครื่อง (Clone)

เมื่อได้รับคำเชิญ Collaborator จากหัวหน้ากลุ่ม ให้:

1. กดยอมรับคำเชิญในอีเมล
2. โคลนโปรเจกต์ลงเครื่อง (ใช้ลิงก์จากหน้าหลักของ Repository บน GitHub):

```bash
git clone https://github.com/ชื่อผู้สร้าง/comorg-book-thai.git
cd comorg-book-thai
```

**ผลลัพธ์ที่พึงได้:** จะได้โฟลเดอร์ `comorg-book-thai` มีโครงสร้างโฟลเดอร์ตามที่หัวหน้าสร้างไว้ เช่น `README.md`, `chapter-4/`, `chapter-4/README.md` เป็นต้น

### ครั้งถัดไป: ดึงข้อมูลล่าสุด (Pull)

เมื่อมีโปรเจกต์ในเครื่องแล้ว ทุกครั้งที่เริ่มงานให้ดึงข้อมูลล่าสุดก่อน:

```bash
git checkout main
git pull origin main
```

**ผลลัพธ์ที่พึงได้:** ไฟล์ในเครื่องจะอัปเดตเป็นเวอร์ชันล่าสุด เช่น ถ้าเพื่อน Merge งานใหม่เข้า `main` แล้ว ท่านจะได้ไฟล์นั้นมาในเครื่องด้วย

### ขั้นที่ 1: แตกสาขา (Branch)

สร้างพื้นที่ทำงานส่วนตัว ตั้งชื่อตามหัวข้อที่รับผิดชอบ:

```bash
git checkout -b section-4.1
```

### ขั้นที่ 2: ทำงานและบันทึก

1. สร้างไฟล์ `4-1.md` ในโฟลเดอร์ `chapter-4` (หรือบทที่กลุ่มรับผิดชอบ)
2. พิมพ์เนื้อหาตามที่รับผิดชอบ
3. หากมีรูปภาพ: ใช้เฉพาะรูปที่ทำเองหรือมีลิขสิทธิ์ถูกต้อง **ห้ามตัด-แปะจากต้นฉบับ PDF**

### ขั้นที่ 3: ส่งงานขึ้นเว็บ (Push)

**ก่อน `git add`:** ตรวจสอบว่าไม่มีการนำไฟล์ PDF เข้ามาในโฟลเดอร์โปรเจกต์ (หรือมี `.gitignore` ป้องกันแล้ว)

```bash
git add .
git commit -m "เพิ่มหัวข้อ 4.1"
git push -u origin section-4.1
```

**ผลลัพธ์ที่พึงได้ (ตัวอย่าง):**

```
[section-4.1 abc1234] เพิ่มหัวข้อ 4.1
 1 file changed, 25 insertions(+)
 create mode 100644 chapter-4/4-1.md
...
To https://github.com/.../comorg-book-thai.git
 * [new branch]      section-4.1 -> section-4.1
```

จากนั้นบน GitHub จะแสดงปุ่ม **Compare & pull request** สำหรับสาขา `section-4.1`

### ขั้นที่ 4: ขอรวมไฟล์ (Pull Request)

1. เข้าเว็บ GitHub ไปที่ Repository `comorg-book-thai`
2. ระบบจะแสดงปุ่ม **Compare & pull request** (หรือไปที่แท็บ **Pull requests** แล้วกด **New pull request**)
3. เลือกสาขาของตนเองเปรียบเทียบกับ `main` กด **Create pull request** พร้อมเขียนข้อความอธิบาย
4. รอให้หัวหน้ากลุ่มตรวจสอบและกด **Merge pull request**

**ผลลัพธ์ที่พึงได้ (ตัวอย่างสถานการณ์):**
- หลังหัวหน้า Merge แล้ว เมื่อเข้า `chapter-4/README.md` บน GitHub ลิงก์ `[คลิกอ่าน 4.1](4-1.md)` จะเชื่อมไปยังไฟล์ `4-1.md` ที่ท่านสร้างได้
- หน้าเว็บจะแสดงเนื้อหาที่ท่านเขียนอย่างสมบูรณ์

### ขั้นที่ 5: หลัง Merge แล้ว

เมื่อหัวหน้ากลุ่ม Merge งานของท่านแล้ว ให้สลับกลับสาขาหลักและดึงงานที่รวมแล้ว:

```bash
git checkout main
git pull origin main
```

*(เพื่อให้เครื่องของท่านมีโครงสร้างล่าสุดสำหรับการทำงานครั้งต่อไป)*

---

[← กลับไปสารบัญหลัก](README.md) | [ก่อนหน้า: บททดสอบก่อนลงสนาม](03-workshop.md) | [ถัดไป: การทำงานหลายเครื่อง →](05-syncing.md)
